(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{571:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var s=r(5155),n=r(2115),o=r(3858),a=r(7004),i=r(6606),l=r(9652),c=r(8009);function d(e){let{content:t,className:d="",articleSlug:u}=e,[g,h]=(0,n.useState)(""),[m,p]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{!async function(){try{let e=t;u&&(e=t.replace(/!\[([^\]]*)\]\(\.\/assets\/([^)]+)\)/g,"![$1](/api/articles/".concat(u,"/assets/$2)")).replace(/!\[([^\]]*)\]\(assets\/([^)]+)\)/g,"![$1](/api/articles/".concat(u,"/assets/$2)"))),e=e.replace(/\\\[([\s\S]*?)\\\]/g,(e,t)=>"\n\n$$\n".concat(String(t).trim(),"\n$$\n\n")).replace(/\\\(([\s\S]*?)\\\)/g,(e,t)=>"$".concat(String(t).trim(),"$"));let s=await (0,o.V)().use(i.A).use(l.A).use(a.A,{sanitize:!1}).process(e),{rehype:n}=await r.e(280).then(r.bind(r,5280)),d=await n().use(c.A,{throwOnError:!1,errorColor:"#cc0000",strict:!1,trust:!0,fleqn:!1,macros:{"\\RR":"\\mathbb{R}","\\NN":"\\mathbb{N}","\\ZZ":"\\mathbb{Z}","\\vec":"\\mathbf{#1}","\\mat":"\\mathbf{#1}","\\tr":"\\operatorname{tr}","\\det":"\\operatorname{det}","\\rank":"\\operatorname{rank}","\\norm":"\\left\\|#1\\right\\|","\\abs":"\\left|#1\\right|","\\bm":"\\boldsymbol{#1}","\\E":"\\mathbb{E}","\\Var":"\\operatorname{Var}","\\Cov":"\\operatorname{Cov}","\\argmax":"\\mathop{\\mathrm{arg\\,max}}","\\argmin":"\\mathop{\\mathrm{arg\\,min}}"}}).process(s.toString());h(d.toString())}catch(e){console.error("Error processing markdown:",e),h("<p>Error rendering content</p>")}finally{p(!1)}}()},[t,u]),m)?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--accent-1)"}})}):(0,s.jsx)("div",{className:"prose prose-lg max-w-none ".concat(d),style:{"--tw-prose-body":"var(--foreground)","--tw-prose-headings":"var(--foreground)","--tw-prose-lead":"var(--muted)","--tw-prose-links":"var(--accent-1)","--tw-prose-bold":"var(--foreground)","--tw-prose-counters":"var(--muted)","--tw-prose-bullets":"var(--muted)","--tw-prose-hr":"color-mix(in srgb, var(--foreground), transparent 80%)","--tw-prose-quotes":"var(--foreground)","--tw-prose-quote-borders":"var(--accent-1)","--tw-prose-captions":"var(--muted)","--tw-prose-code":"var(--accent-2)","--tw-prose-pre-code":"var(--foreground)","--tw-prose-pre-bg":"color-mix(in srgb, var(--card), transparent 30%)","--tw-prose-th-borders":"color-mix(in srgb, var(--foreground), transparent 70%)","--tw-prose-td-borders":"color-mix(in srgb, var(--foreground), transparent 85%)"},dangerouslySetInnerHTML:{__html:g}})}r(1491)},674:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(5155),n=r(2115),o=r(5695),a=r(9509);function i(e){let{children:t}=e,[r,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),g=(0,o.useParams)().slug;(0,n.useEffect)(()=>(document.documentElement.classList.add("reading-theme"),i(!0),()=>{document.documentElement.classList.remove("reading-theme")}),[]);let h=async()=>{if("true"===a.env.NEXT_PUBLIC_STATIC_EXPORT)return void alert("PDF generation is unavailable on static export. Clone the repo and run locally to generate PDFs.");try{c(!0);let e=await fetch("/api/articles/".concat(g,"/pdf"));if(!e.ok)throw Error("Failed to generate PDF");let t=await e.blob(),r=window.URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download="".concat(g,".pdf"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(r),document.body.removeChild(s)}catch(e){console.error("Error downloading PDF:",e),alert("Failed to download PDF. Please try again.")}finally{c(!1)}},m=async()=>{try{let e=window.location.href;await navigator.clipboard.writeText(e),u(!0),setTimeout(()=>u(!1),1500)}catch(t){let e=window.location.href;window.prompt("Copy this link",e)}};return(0,s.jsxs)("div",{className:"reading-container ".concat(r?"reading-active":""),children:[(0,s.jsxs)("div",{className:"reading-controls fixed top-24 right-6 z-50 flex flex-col gap-3",children:[(0,s.jsx)("button",{onClick:()=>{i(!r),r?document.documentElement.classList.remove("reading-theme"):document.documentElement.classList.add("reading-theme")},className:"p-3 rounded-lg transition-all duration-300 glass-subtle",style:{backgroundColor:"color-mix(in srgb, var(--card), transparent 20%)",border:"1px solid color-mix(in srgb, var(--foreground), transparent 85%)"},title:r?"Exit Reading Mode":"Enter Reading Mode",children:(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"var(--foreground)"},children:r?(0,s.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}):(0,s.jsx)("path",{d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),(0,s.jsx)("button",{onClick:h,disabled:l,className:"p-3 rounded-lg transition-all duration-300 glass-subtle",style:{backgroundColor:"color-mix(in srgb, var(--card), transparent 20%)",border:"1px solid color-mix(in srgb, var(--foreground), transparent 85%)"},title:"Download as PDF",children:l?(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"var(--foreground)"},className:"animate-spin",children:(0,s.jsx)("path",{d:"M21 12a9 9 0 11-6.219-8.56"})}):(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"var(--foreground)"},children:[(0,s.jsx)("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"}),(0,s.jsx)("polyline",{points:"7,10 12,15 17,10"}),(0,s.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),(0,s.jsx)("button",{onClick:m,className:"p-3 rounded-lg transition-all duration-300 glass-subtle",style:{backgroundColor:"color-mix(in srgb, var(--card), transparent 20%)",border:"1px solid color-mix(in srgb, var(--foreground), transparent 85%)"},title:"Copy article link",children:d?(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"var(--foreground)"},children:(0,s.jsx)("path",{d:"M20 6L9 17l-5-5"})}):(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:"var(--foreground)"},children:[(0,s.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,s.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,s.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,s.jsx)("path",{d:"M8.59 13.51l6.83 3.98M15.41 6.51L8.59 10.49"})]})})]}),t]})}},5829:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.t.bind(r,3063,23)),Promise.resolve().then(r.bind(r,6947)),Promise.resolve().then(r.bind(r,571)),Promise.resolve().then(r.bind(r,674))},6947:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(2115);class n{initializeSession(){this.currentSession={sessionId:this.generateSessionId(),startTime:new Date,scrollDepth:0,readingTime:0,device:this.detectDevice(),referrer:document.referrer||void 0}}generateSessionId(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,15))}detectDevice(){let e=window.innerWidth;return e<768?"mobile":e<1024?"tablet":"desktop"}setupScrollTracking(){let e,t=0,r=Date.now(),s=()=>{let e=Math.round((window.pageYOffset||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-window.innerHeight)*100);t=Math.max(t,e),this.currentSession&&(this.currentSession.scrollDepth=t,this.currentSession.readingTime=Date.now()-r)};window.addEventListener("scroll",()=>{clearTimeout(e),e=setTimeout(s,100)},{passive:!0}),document.addEventListener("visibilitychange",()=>{document.hidden||(r=Date.now())});let n=()=>{this.endSession()};window.addEventListener("beforeunload",n)}trackArticleView(e,t){let r=this.getStoredAnalytics(),s=r.find(t=>t.slug===e);if(s)s.views+=1,s.lastViewed=new Date,this.currentSession&&s.sessions.push({...this.currentSession});else{let t={slug:e,views:1,totalReadingTime:0,averageScrollDepth:0,lastViewed:new Date,sessions:this.currentSession?[{...this.currentSession}]:[]};r.push(t)}this.storeAnalytics(r)}endSession(){this.currentSession&&(this.currentSession.endTime=new Date,this.currentSession=null)}getArticleAnalytics(e){return this.getStoredAnalytics().find(t=>t.slug===e)||null}getAllAnalytics(){return this.getStoredAnalytics()}getAnalyticsMetrics(){let e=this.getStoredAnalytics(),t=e.reduce((e,t)=>e+t.views,0),r=e.flatMap(e=>e.sessions),s=new Set(r.map(e=>e.sessionId)).size,n=r.reduce((e,t)=>e+t.readingTime,0),o=r.length>0?n/r.length:0,a=e.map(e=>({slug:e.slug,title:e.slug.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),views:e.views,readingTime:e.sessions.reduce((e,t)=>e+t.readingTime,0)/e.sessions.length||0})).sort((e,t)=>t.views-e.views).slice(0,10);return{totalViews:t,uniqueVisitors:s,averageReadingTime:o,topArticles:a,deviceBreakdown:r.reduce((e,t)=>(e[t.device]++,e),{mobile:0,tablet:0,desktop:0}),weeklyViews:this.generateWeeklyViews(e)}}generateWeeklyViews(e){let t=new Date,r=[];for(let s=6;s>=0;s--){let n=new Date(t);n.setDate(n.getDate()-s);let o=n.toISOString().split("T")[0],a=e.reduce((e,t)=>e+t.sessions.filter(e=>new Date(e.startTime).toISOString().split("T")[0]===o).length,0);r.push({date:o,views:a})}return r}clearAnalytics(){localStorage.removeItem(this.storageKey)}getStoredAnalytics(){try{let e=localStorage.getItem(this.storageKey);if(!e)return[];return JSON.parse(e).map(e=>({...e,lastViewed:new Date(e.lastViewed),sessions:e.sessions.map(e=>({...e,startTime:new Date(e.startTime),endTime:e.endTime?new Date(e.endTime):void 0}))}))}catch(e){return console.error("Error loading analytics from localStorage:",e),[]}}storeAnalytics(e){try{localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){console.error("Error storing analytics to localStorage:",e)}}constructor(){this.storageKey="portfolio_analytics",this.currentSession=null,this.scrollObserver=null,this.initializeSession(),this.setupScrollTracking()}}let o=new n;function a(e){let{slug:t,title:r}=e,{trackView:n}=function(e){let[t,r]=(0,s.useState)(null),[n,a]=(0,s.useState)(null),[i,l]=(0,s.useState)(!0),c=(0,s.useCallback)((e,t)=>{o.trackArticleView(e,t||e),void 0===e&&r(o.getArticleAnalytics(e))},[void 0]),d=(0,s.useCallback)(()=>{l(!0),a(o.getAnalyticsMetrics()),l(!1)},[]),u=(0,s.useCallback)(()=>{e&&(l(!0),r(o.getArticleAnalytics(e)),l(!1))},[e]);(0,s.useEffect)(()=>{e?u():d()},[e,u,d]);let g=(0,s.useCallback)(()=>{o.clearAnalytics(),r(null),a(null),d()},[d]);return{analytics:t,metrics:n,isLoading:i,trackView:c,refreshMetrics:d,refreshAnalytics:u,clearAnalytics:g}}();return(0,s.useEffect)(()=>{n(t,r)},[t,r,n]),null}}},e=>{e.O(0,[562,330,874,63,859,441,964,358],()=>e(e.s=5829)),_N_E=e.O()}]);